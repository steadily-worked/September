<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>time : <span id='time'></span></p>
    <input type='button' id='execute' value='execute' />
    <script>
    document.querySelector('input').addEventListener('click', function(event) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', './time.php'); // 서버랑 통신할 때 GET방식 사용, 서버와 통신하는 서버쪽 url(resource)은 time.php이다.
        // form method="GET"에서 GET이 첫 번째 인자임. action="./php"에서 ./php가 두 번째 인자임.
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // readyState === 4 -> 모든 통신이 끝났다는 뜻.
                // xhr.status -> 커뮤니케이션의 결과. === 200 이라는 건 성공했다는 뜻.
                // 즉 if문 안에는 통신이 끝났고 성공했다는 뜻이다.
                document.querySelector('#time').innerHTML = xhr.responseText;
                // time id의 innerHTML로, 서버에서 가져온 정보를 넣는다는 뜻. responseText는 서버에서 return해준 정보를 담고 있는 property임.
            }
        }
        xhr.send(); // open 후 send 해야함
        // send라는 메소드가 호출될 때 ajax(xhr) 객체가 onreadystatechange의 주소로 ./time.php를 호출
    });
    </script>
</body>
</html>


<!-- XMLHttpRequest 방식이다. from 생활코딩-->
